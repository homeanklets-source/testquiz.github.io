
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>Basics of Flight Quiz</title>
<style>
  * { box-sizing: border-box; }
  body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    color: #e0e8ff;
    background: url('https://images.unsplash.com/photo-1504384308090-c894fdcc538d?auto=format&fit=crop&w=1600&q=80') center/cover fixed;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding: 30px 10px;
  }
  .quiz-container {
    max-width: 400px;
    width: 100%;
    background: rgba(0, 0, 20, 0.6);
    backdrop-filter: blur(10px);
    border-radius: 16px;
    padding: 20px;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }
  h1 {
    text-align: center;
    font-size: 20px;
    margin-bottom: 10px;
  }
  .meta {
    display: flex;
    justify-content: space-between;
    font-size: 14px;
    color: #b3c4ff;
    margin-bottom: 10px;
  }
  .question {
    font-weight: 600;
    margin-bottom: 10px;
  }
  .option {
    display: block;
    margin-bottom: 8px;
    padding: 8px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    cursor: pointer;
    background: rgba(255,255,255,0.05);
  }
  .option:hover { background: rgba(255,255,255,0.1); }
  button {
    width: 100%;
    background: #4c6fff;
    border: none;
    color: white;
    padding: 10px;
    border-radius: 8px;
    font-weight: bold;
    margin-top: 10px;
    cursor: pointer;
  }
  .hidden { display: none; }
  .center { text-align: center; }
  .overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,30,0.9);
    display: none;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    color: white;
  }
</style>
</head>
<body>
<div class="quiz-container" id="quizBox">
  <h1>Basics of Flight Quiz</h1>
  <div class="meta">
    <div>Q <span id="qNum">1</span>/20</div>
    <div>Time: <span id="timeLeft">60</span>s</div>
  </div>
  <div class="question" id="questionText"></div>
  <div id="optionsBox"></div>
  <button id="nextBtn">Next</button>
  <p class="center" style="font-size:13px;color:#b3c4ff;">Infractions: <span id="infractions">0</span>/3 | Score: <span id="score">0</span></p>
</div>

<div class="overlay" id="disqOverlay">
  <h2>You are disqualified üö´</h2>
  <p>Switched apps/tabs too many times.</p>
</div>

<div class="overlay" id="resultOverlay">
  <h2>Quiz Finished ‚úàÔ∏è</h2>
  <p>Score: <span id="finalScore">0</span> / 20</p>
  <button onclick="location.reload()">Retry</button>
</div>

<script>
const questions = [
  {q:'What produces lift?', a:1, opts:['Thrust','Lift','Gravity','Drag']},
  {q:'Which controls roll?', a:0, opts:['Ailerons','Elevator','Rudder','Flaps']},
  {q:'Angle of attack is?', a:1, opts:['Wing tilt','Angle between chord and wind','Tail angle','Camber line']},
  {q:'Which surface controls yaw?', a:2, opts:['Ailerons','Elevator','Rudder','Slats']},
  {q:'Bernoulli‚Äôs principle explains?', a:0, opts:['Lift','Drag','Weight','Thrust']},
  {q:'What causes drag?', a:2, opts:['Lift','Thrust','Air resistance','Friction only']},
  {q:'A stall happens when?', a:1, opts:['Too slow','Angle of attack too high','Too much thrust','Inverted flight']},
  {q:'What device increases lift at low speeds?', a:2, opts:['Spoilers','Rudder','Flaps','Ailerons']},
  {q:'What is thrust?', a:1, opts:['Opposes lift','Pushes forward','Adds drag','Turns plane']},
  {q:'Purpose of vertical stabilizer?', a:3, opts:['Lift','Pitch control','Roll control','Yaw stability']},
  {q:'Ground effect causes?', a:0, opts:['More lift near ground','Less lift','More drag','No effect']},
  {q:'Dihedral improves?', a:2, opts:['Pitch','Yaw','Roll stability','Lift']},
  {q:'What opposes lift?', a:3, opts:['Thrust','Drag','Pressure','Weight']},
  {q:'High camber wing has?', a:0, opts:['More lift','Less lift','Same lift','No lift']},
  {q:'Thrust-to-weight ratio affects?', a:1, opts:['Drag','Climb rate','Landing distance','Fuel flow']},
  {q:'Which is parasite drag?', a:0, opts:['Skin friction','Induced drag','Lift','Camber drag']},
  {q:'At stall angle, lift?', a:2, opts:['Increases','Same','Drops suddenly','Doubles']},
  {q:'AoA sensor measures?', a:1, opts:['Speed','Angle between wind and chord','Altitude','Bank angle']},
  {q:'Flaps down cause?', a:0, opts:['More lift, more drag','Less lift','Faster descent','No change']},
  {q:'Airflow over top wing?', a:2, opts:['Slower','Equal','Faster','Stops']},
];

let current = 0, score = 0, infractions = 0;
let timer = null, timeLeft = 60;
let lastVisible = Date.now();
let monitoring = false;

const qText = document.getElementById('questionText');
const qNum = document.getElementById('qNum');
const optsBox = document.getElementById('optionsBox');
const timeEl = document.getElementById('timeLeft');
const nextBtn = document.getElementById('nextBtn');
const infEl = document.getElementById('infractions');
const scoreEl = document.getElementById('score');
const disqOverlay = document.getElementById('disqOverlay');
const resultOverlay = document.getElementById('resultOverlay');
const finalScore = document.getElementById('finalScore');

function showQuestion() {
  if (current >= questions.length) {
    endQuiz();
    return;
  }
  const q = questions[current];
  qNum.textContent = current + 1;
  qText.textContent = q.q;
  optsBox.innerHTML = '';
  q.opts.forEach((opt,i)=>{
    const div = document.createElement('label');
    div.className = 'option';
    div.innerHTML = `<input type='radio' name='opt' value='${i}'> ${opt}`;
    optsBox.appendChild(div);
  });
  timeLeft = 60;
  timeEl.textContent = timeLeft;
  clearInterval(timer);
  timer = setInterval(()=>{
    timeLeft--;
    timeEl.textContent = timeLeft;
    if(timeLeft <= 0){nextQuestion();}
  },1000);
  monitoring = true;
}

function nextQuestion(){
  clearInterval(timer);
  const checked = document.querySelector('input[name=opt]:checked');
  if(checked && Number(checked.value) === questions[current].a) score++;
  scoreEl.textContent = score;
  current++;
  showQuestion();
}

function endQuiz(){
  clearInterval(timer);
  document.getElementById('quizBox').style.display='none';
  finalScore.textContent = score;
  resultOverlay.style.display='flex';
}

nextBtn.onclick = nextQuestion;

document.addEventListener('visibilitychange',()=>{
  if(!monitoring) return;
  if(document.hidden){
    const now = Date.now();
    // Ignore quick flickers < 1500ms
    if(now - lastVisible < 1500) return;
    infractions++;
    infEl.textContent = infractions;
    score = Math.max(0, score - 1);
    scoreEl.textContent = score;
    if(infractions >= 3){
      disqOverlay.style.display='flex';
      document.getElementById('quizBox').style.display='none';
      clearInterval(timer);
    }
  } else {
    lastVisible = Date.now();
  }
});

window.onload = () => {
  if(window.innerWidth > 768){
    document.body.innerHTML = '<div style=\"color:white;text-align:center;margin-top:40vh;\">üì± Please open this quiz on your phone.</div>';
    return;
  }
  showQuestion();
}
</script>
</body>
</html>
